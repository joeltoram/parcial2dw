{"version":3,"sources":["script.js"],"names":["API_KEY","BASE_URL","API_URL","IMG_URL","LANGUAGE","searchURL","genres","id","name","document","tagsEl","select","selectedGenre","setGenre","innerHTML","classList","t","main","getElementById","idx","search","console","getMovies","highlghtSelection","createElement","add","append","innerText","genre","addEventListener","length","push","includes","forEach","splice","log","encodeURI","join","then","data","genero","title","movie","option","poster_path","release_date","vote_average","tags","res","tag","json","remove","results","showMovies","highlghtedtag","overview","movieEl","getcolor","concat","preventDefault","searchTerm","qquerySelectorAll","vote","seleccion","form","e","value","URL"],"mappings":"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","file":"script.min.js","sourcesContent":["//TMDB\r\n\r\nconst API_KEY = 'api_key=0cc4dd702aea5bb207422b56e5e29790';\r\nconst BASE_URL = 'https://api.themoviedb.org/3';\r\nconst API_URL=BASE_URL + '/discover/movie?sort_by=popularity.desc&'+API_KEY;\r\nconst IMG_URL='https://image.tmdb.org/t/p/w500';\r\nconst LANGUAGE='&language=es-ES'\r\nconst searchURL=BASE_URL+'/search/movie?'+API_KEY;\r\nconst URL='https://api.themoviedb.org/3/discover/movie?api_key=0cc4dd702aea5bb207422b56e5e29790&language=es-ES';\r\n\r\nconst genres = [\r\n    {\r\n        \"id\": 28,\r\n        \"name\": \"Action\"\r\n    },\r\n    {\r\n        \"id\": 12,\r\n        \"name\": \"Adventure\"\r\n    },\r\n    {\r\n        \"id\": 16,\r\n        \"name\": \"Animation\"\r\n    },\r\n    {\r\n        \"id\": 35,\r\n        \"name\": \"Comedy\"\r\n    },\r\n    {\r\n        \"id\": 80,\r\n        \"name\": \"Crime\"\r\n    },\r\n    {\r\n        \"id\": 99,\r\n        \"name\": \"Documentary\"\r\n    },\r\n    {\r\n        \"id\": 18,\r\n        \"name\": \"Drama\"\r\n    },\r\n    {\r\n        \"id\": 10751,\r\n        \"name\": \"Family\"\r\n    },\r\n    {\r\n        \"id\": 14,\r\n        \"name\": \"Fantasy\"\r\n    },\r\n    {\r\n        \"id\": 36,\r\n        \"name\": \"History\"\r\n    },\r\n    {\r\n        \"id\": 27,\r\n        \"name\": \"Horror\"\r\n    },\r\n    {\r\n        \"id\": 10402,\r\n        \"name\": \"Music\"\r\n    },\r\n    {\r\n        \"id\": 9648,\r\n        \"name\": \"Mystery\"\r\n    },\r\n    {\r\n        \"id\": 10749,\r\n        \"name\": \"Romance\"\r\n    },\r\n    {\r\n        \"id\": 878,\r\n        \"name\": \"Science Fiction\"\r\n    },\r\n    {\r\n        \"id\": 10770,\r\n        \"name\": \"TV Movie\"\r\n    },\r\n    {\r\n        \"id\": 53,\r\n        \"name\": \"Thriller\"\r\n    },\r\n    {\r\n        \"id\": 10752,\r\n        \"name\": \"War\"\r\n    },\r\n    {\r\n        \"id\": 37,\r\n        \"name\": \"Western\"\r\n    }\r\n]\r\n\r\nconst main=document.getElementById('main');\r\nconst form=document.getElementById('form');\r\nconst search=document.getElementById('search');\r\nconst tagsEl=document.getElementById('tags');\r\nconst select=document.getElementById('select');\r\n\r\nvar selectedGenre=[]\r\nsetGenre();\r\nfunction setGenre() {\r\n    tagsEl.innerHTML = '';\r\n    genres.forEach(genre =>{\r\n        const t=document.createElement('div');\r\n        t.classList.add('tag');\r\n        t.id=genre.id;\r\n        t.innerText=genre.name;\r\n        t.addEventListener('click',()=>{\r\n            if (selectedGenre.length == 0){\r\n                selectedGenre.push(genre.id);\r\n            }else{\r\n                if (selectedGenre.includes(genre.id)){\r\n                    selectedGenre.forEach((id, idx) => {\r\n                        if (id == genre.id){\r\n                            selectedGenre.splice(idx,1);\r\n                        }\r\n                    })\r\n                }else{\r\n                    selectedGenre.push(genre.id);\r\n                }\r\n            }\r\n            console.log(selectedGenre)\r\n            getMovies(API_URL+'&with_genres='+encodeURI(selectedGenre.join(',')))\r\n            highlghtSelection()\r\n        });\r\n        tagsEl.append(t);\r\n\r\n    })\r\n    \r\n\r\n}\r\nseleccion();\r\nfunction seleccion(){\r\n    genres.forEach(genero=>{\r\n       var option=document.createElement('option');\r\n       option.text=genero.name;\r\n       option.value=genero.id;\r\n       select.add(option);\r\n\r\n    })\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\ngetMovies(URL);\r\nfunction getMovies(url){\r\n    fetch(url).then(res => res.json()).then(data=>{\r\n        console.log(data.results);\r\n        showMovies(data.results);\r\n    })\r\n}\r\n\r\nfunction showMovies(data){\r\n    main.innerHTML = '';\r\n    data.forEach(movie =>{\r\n        const {title, poster_path, release_date,vote_average, overview} = movie;\r\n        const movieEl = document.createElement('div');\r\n        movieEl.classList.add('movie');\r\n        movieEl.innerHTML = `<img src=\"${IMG_URL+poster_path}\" alt=\"${title}\">\r\n        <div class=\"movie-info\">\r\n            <h3>${title}</h3> \r\n            <h5>${release_date}</h5>       \r\n            \r\n            <span class=\"${getcolor(vote_average)}\">${vote_average}</span>\r\n          \r\n        </div>\r\n\r\n        <div class=\"overview\">\r\n            <h3>Descripci√≥n</h3>\r\n            ${overview}\r\n        </div>`\r\n\r\n        main.appendChild(movieEl);\r\n        console.log(searchURL);\r\n\r\n        \r\n        \r\n    })\r\n\r\n}\r\n\r\nfunction highlghtSelection(){\r\n    const tags = document.qquerySelectorAll('.tag')\r\n    tags.forEach(tag => {\r\n        tag.classList.remove('highlight');\r\n    })\r\n    if(selectedGenre.length !==0){\r\n        selectedGenre.forEach(id =>{\r\n            const highlghtedtag = document.getElementById(id);\r\n            highlghtedtag.classList.add('highlight');\r\n\r\n        })\r\n\r\n    }\r\n    \r\n}\r\n\r\n\r\nfunction getcolor(vote) {\r\n    if (vote>=8){\r\n        return 'green'\r\n    }else if (vote>=5){\r\n        return 'orange'\r\n    }else{\r\n        return'red'\r\n    }\r\n}\r\n\r\n\r\nform.addEventListener('submit',(e)=>{\r\n    e.preventDefault();\r\n\r\n    const searchTerm=search.value;\r\n    if(searchTerm){\r\n        getMovies(searchURL+'&query='+searchTerm);\r\n    }else{\r\n        getMovies(URL);\r\n    }\r\n\r\n})"]}