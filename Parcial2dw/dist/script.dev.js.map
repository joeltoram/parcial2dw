{"version":3,"sources":["script.js"],"names":["API_KEY","BASE_URL","API_URL","IMG_URL","LANGUAGE","searchURL","URL","genres","main","document","getElementById","form","search","tagsEl","select","selectedGenre","setGenre","innerHTML","forEach","genre","t","createElement","classList","add","id","innerText","name","addEventListener","length","push","includes","idx","splice","console","log","getMovies","encodeURI","join","highlghtSelection","append","seleccion","genero","option","text","value","url","fetch","then","res","json","data","results","showMovies","movie","title","poster_path","release_date","vote_average","overview","movieEl","getcolor","appendChild","tags","qquerySelectorAll","tag","remove","highlghtedtag","vote","e","preventDefault","searchTerm"],"mappings":"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","sourcesContent":["//TMDB\r\n\r\nconst API_KEY = 'api_key=0cc4dd702aea5bb207422b56e5e29790';\r\nconst BASE_URL = 'https://api.themoviedb.org/3';\r\nconst API_URL=BASE_URL + '/discover/movie?sort_by=popularity.desc&'+API_KEY;\r\nconst IMG_URL='https://image.tmdb.org/t/p/w500';\r\nconst LANGUAGE='&language=es-ES'\r\nconst searchURL=BASE_URL+'/search/movie?'+API_KEY;\r\nconst URL='https://api.themoviedb.org/3/discover/movie?api_key=0cc4dd702aea5bb207422b56e5e29790&language=es-ES';\r\n\r\nconst genres = [\r\n    {\r\n        \"id\": 28,\r\n        \"name\": \"Action\"\r\n    },\r\n    {\r\n        \"id\": 12,\r\n        \"name\": \"Adventure\"\r\n    },\r\n    {\r\n        \"id\": 16,\r\n        \"name\": \"Animation\"\r\n    },\r\n    {\r\n        \"id\": 35,\r\n        \"name\": \"Comedy\"\r\n    },\r\n    {\r\n        \"id\": 80,\r\n        \"name\": \"Crime\"\r\n    },\r\n    {\r\n        \"id\": 99,\r\n        \"name\": \"Documentary\"\r\n    },\r\n    {\r\n        \"id\": 18,\r\n        \"name\": \"Drama\"\r\n    },\r\n    {\r\n        \"id\": 10751,\r\n        \"name\": \"Family\"\r\n    },\r\n    {\r\n        \"id\": 14,\r\n        \"name\": \"Fantasy\"\r\n    },\r\n    {\r\n        \"id\": 36,\r\n        \"name\": \"History\"\r\n    },\r\n    {\r\n        \"id\": 27,\r\n        \"name\": \"Horror\"\r\n    },\r\n    {\r\n        \"id\": 10402,\r\n        \"name\": \"Music\"\r\n    },\r\n    {\r\n        \"id\": 9648,\r\n        \"name\": \"Mystery\"\r\n    },\r\n    {\r\n        \"id\": 10749,\r\n        \"name\": \"Romance\"\r\n    },\r\n    {\r\n        \"id\": 878,\r\n        \"name\": \"Science Fiction\"\r\n    },\r\n    {\r\n        \"id\": 10770,\r\n        \"name\": \"TV Movie\"\r\n    },\r\n    {\r\n        \"id\": 53,\r\n        \"name\": \"Thriller\"\r\n    },\r\n    {\r\n        \"id\": 10752,\r\n        \"name\": \"War\"\r\n    },\r\n    {\r\n        \"id\": 37,\r\n        \"name\": \"Western\"\r\n    }\r\n]\r\n\r\nconst main=document.getElementById('main');\r\nconst form=document.getElementById('form');\r\nconst search=document.getElementById('search');\r\nconst tagsEl=document.getElementById('tags');\r\nconst select=document.getElementById('select');\r\n\r\nvar selectedGenre=[]\r\nsetGenre();\r\nfunction setGenre() {\r\n    tagsEl.innerHTML = '';\r\n    genres.forEach(genre =>{\r\n        const t=document.createElement('div');\r\n        t.classList.add('tag');\r\n        t.id=genre.id;\r\n        t.innerText=genre.name;\r\n        t.addEventListener('click',()=>{\r\n            if (selectedGenre.length == 0){\r\n                selectedGenre.push(genre.id);\r\n            }else{\r\n                if (selectedGenre.includes(genre.id)){\r\n                    selectedGenre.forEach((id, idx) => {\r\n                        if (id == genre.id){\r\n                            selectedGenre.splice(idx,1);\r\n                        }\r\n                    })\r\n                }else{\r\n                    selectedGenre.push(genre.id);\r\n                }\r\n            }\r\n            console.log(selectedGenre)\r\n            getMovies(API_URL+'&with_genres='+encodeURI(selectedGenre.join(',')))\r\n            highlghtSelection()\r\n        });\r\n        tagsEl.append(t);\r\n\r\n    })\r\n    \r\n\r\n}\r\nseleccion();\r\nfunction seleccion(){\r\n    genres.forEach(genero=>{\r\n       var option=document.createElement('option');\r\n       option.text=genero.name;\r\n       option.value=genero.id;\r\n       select.add(option);\r\n\r\n    })\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\ngetMovies(URL);\r\nfunction getMovies(url){\r\n    fetch(url).then(res => res.json()).then(data=>{\r\n        console.log(data.results);\r\n        showMovies(data.results);\r\n    })\r\n}\r\n\r\nfunction showMovies(data){\r\n    main.innerHTML = '';\r\n    data.forEach(movie =>{\r\n        const {title, poster_path, release_date,vote_average, overview} = movie;\r\n        const movieEl = document.createElement('div');\r\n        movieEl.classList.add('movie');\r\n        movieEl.innerHTML = `<img src=\"${IMG_URL+poster_path}\" alt=\"${title}\">\r\n        <div class=\"movie-info\">\r\n            <h3>${title}</h3> \r\n            <h5>${release_date}</h5>       \r\n            \r\n            <span class=\"${getcolor(vote_average)}\">${vote_average}</span>\r\n          \r\n        </div>\r\n\r\n        <div class=\"overview\">\r\n            <h3>Descripci√≥n</h3>\r\n            ${overview}\r\n        </div>`\r\n\r\n        main.appendChild(movieEl);\r\n        console.log(searchURL);\r\n\r\n        \r\n        \r\n    })\r\n\r\n}\r\n\r\nfunction highlghtSelection(){\r\n    const tags = document.qquerySelectorAll('.tag')\r\n    tags.forEach(tag => {\r\n        tag.classList.remove('highlight');\r\n    })\r\n    if(selectedGenre.length !==0){\r\n        selectedGenre.forEach(id =>{\r\n            const highlghtedtag = document.getElementById(id);\r\n            highlghtedtag.classList.add('highlight');\r\n\r\n        })\r\n\r\n    }\r\n    \r\n}\r\n\r\n\r\nfunction getcolor(vote) {\r\n    if (vote>=8){\r\n        return 'green'\r\n    }else if (vote>=5){\r\n        return 'orange'\r\n    }else{\r\n        return'red'\r\n    }\r\n}\r\n\r\n\r\nform.addEventListener('submit',(e)=>{\r\n    e.preventDefault();\r\n\r\n    const searchTerm=search.value;\r\n    if(searchTerm){\r\n        getMovies(searchURL+'&query='+searchTerm);\r\n    }else{\r\n        getMovies(URL);\r\n    }\r\n\r\n})"],"file":"script.dev.js"}